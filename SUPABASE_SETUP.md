# Supabase Database Setup Guide

This application requires a Supabase backend to synchronize game state across all clients (Admin and Players).

## 1. Create a Supabase Project
1. Go to [database.new](https://database.new) and create a new project.
2. Once created, go to **Project Settings > API**.
3. Copy the **Project URL** and **anon public key**.

## 2. Configure Environment Variables
Create a file named `.env` in the root of your project (`d:/Event/New folder/Mind_Buzzer_FInal/`) and add the following:

```env
VITE_SUPABASE_URL=your_project_url_here
VITE_SUPABASE_ANON_KEY=your_anon_key_here
```

## 3. Create Database Tables
Go to the **SQL Editor** in your Supabase dashboard and run the following script:

```sql
-- 1. Create Teams Table
create table public.teams (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  name text unique not null,
  score integer default 0,
  status text default 'playing', -- "playing", "promoted", "eliminated", "banned", "waiting"
  phase text default 'login',
  coding_completed boolean default false,
  react_completed boolean default false,
  last_updated timestamp with time zone default timezone('utc'::text, now())
);

-- Realtime needs to be enabled for this table (usually enabled by default on new tables)
alter publication supabase_realtime add table public.teams;


-- 2. Create Game Config Table
create table public.game_config (
  id bigint generated by default as identity primary key,
  key text unique not null,
  value text
);

alter publication supabase_realtime add table public.game_config;

-- 3. Insert Default Config
insert into public.game_config (key, value)
values ('competition_access', 'false');
```

## 4. Disable RLS (For Quick Start)
Since this is an internal event app, you can disable Row Level Security (RLS) to allow the app to read/write freely without user authentication logic.

Run this SQL:
```sql
alter table public.teams enable row level security;
create policy "Enable all access for all users" on public.teams for all using (true) with check (true);

alter table public.game_config enable row level security;
create policy "Enable all access for all users" on public.game_config for all using (true) with check (true);
```

## 5. Verify Setup
1. Start your app with `npm run dev`.
2. Open the Admin Panel (`Ctrl + Shift + X`, Password: `ADMIN`).
3. Click "START" in Global Competition Control.
4. Check your Supabase Table Editor; `game_config` should show `competition_access` as `true`.

## Troubleshooting
- If changes aren't reflecting, ensure "Realtime" is enabled for your tables in the Supabase Dashboard > Database > Replication.
